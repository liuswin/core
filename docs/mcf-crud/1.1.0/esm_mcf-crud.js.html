<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>esm/mcf-crud.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Classes</li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="module-FormPage.html">FormPage</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-FormPage.html#onSubmit">onSubmit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-FormPage.html#render">render</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-FormPage.html#saveFormRef">saveFormRef</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="module-ListPage.html">ListPage</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ListPage.html#clearSelectRows">clearSelectRows</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ListPage.html#componentWillMount">componentWillMount</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ListPage.html#getSearchParams">getSearchParams</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ListPage.html#getSelectKeys">getSelectKeys</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ListPage.html#getSelectLength">getSelectLength</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ListPage.html#getSelectRows">getSelectRows</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ListPage.html#handleAddRoute">handleAddRoute</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ListPage.html#handleBackRoute">handleBackRoute</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ListPage.html#handleDeleteRoute">handleDeleteRoute</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ListPage.html#handleDetailRoute">handleDetailRoute</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ListPage.html#handleEditRoute">handleEditRoute</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ListPage.html#handleFilter">handleFilter</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ListPage.html#isSelectMultiple">isSelectMultiple</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ListPage.html#isSelectSingle">isSelectSingle</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ListPage.html#mergeTableConfig">mergeTableConfig</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ListPage.html#onChange">onChange</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ListPage.html#onSelectChange">onSelectChange</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ListPage.html#renderSearchBar">renderSearchBar</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ListPage.html#searchParams">searchParams</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ListPage.html#selectMultiple">selectMultiple</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ListPage.html#selectSingle">selectSingle</a></span></li><li class="nav-heading">Modules</li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-FormPage.html">FormPage</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-FormPage.html#onSubmit">onSubmit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-FormPage.html#render">render</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-FormPage.html#saveFormRef">saveFormRef</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-ListPage.html">ListPage</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ListPage.html#clearSelectRows">clearSelectRows</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ListPage.html#componentWillMount">componentWillMount</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ListPage.html#getSearchParams">getSearchParams</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ListPage.html#getSelectKeys">getSelectKeys</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ListPage.html#getSelectLength">getSelectLength</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ListPage.html#getSelectRows">getSelectRows</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ListPage.html#handleAddRoute">handleAddRoute</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ListPage.html#handleBackRoute">handleBackRoute</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ListPage.html#handleDeleteRoute">handleDeleteRoute</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ListPage.html#handleDetailRoute">handleDetailRoute</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ListPage.html#handleEditRoute">handleEditRoute</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ListPage.html#handleFilter">handleFilter</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ListPage.html#isSelectMultiple">isSelectMultiple</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ListPage.html#isSelectSingle">isSelectSingle</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ListPage.html#mergeTableConfig">mergeTableConfig</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ListPage.html#onChange">onChange</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ListPage.html#onSelectChange">onSelectChange</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ListPage.html#renderSearchBar">renderSearchBar</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ListPage.html#searchParams">searchParams</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ListPage.html#selectMultiple">selectMultiple</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ListPage.html#selectSingle">selectSingle</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-Page.html">Page</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Page.html#goAdd">goAdd</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Page.html#goBack">goBack</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Page.html#goDetail">goDetail</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Page.html#goEdit">goEdit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Page.html#goList">goList</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Page.html#goRoutes">goRoutes</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Page.html#render">render</a></span></li><li class="nav-heading"><a href="global.html">Globals</a></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#ListPage">ListPage</a></span></li>
</nav>

<div id="main">
    
    <h1 class="page-title">esm/mcf-crud.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { Component } from 'react';
import PropTypes from 'prop-types';

function _extends() {
  _extends = Object.assign || function (target) {
    for (var i = 1; i &lt; arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends.apply(this, arguments);
}

function _inheritsLoose(subClass, superClass) {
  subClass.prototype = Object.create(superClass.prototype);
  subClass.prototype.constructor = subClass;
  subClass.__proto__ = superClass;
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

var Page =
/*#__PURE__*/
function (_Component) {
  _inheritsLoose(Page, _Component);

  function Page() {
    var _this;

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key &lt; _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _Component.call.apply(_Component, [this].concat(args)) || this;

    _this.addListener = function (type, listener) {
      if (_this.props.eventEmitter) {
        _this.props.eventEmitter.removeAllListeners(type);

        _this.props.eventEmitter.addListener(type, listener.bind(_assertThisInitialized(_assertThisInitialized(_this))));
      }
    };

    _this.removeListener = function (type) {
      if (_this.props.eventEmitter) {
        _this.props.eventEmitter.removeAllListeners(type);
      }
    };

    return _this;
  }

  var _proto = Page.prototype;

  _proto.componentWillMount = function componentWillMount() {
    var _this$props = this.props,
        history = _this$props.history,
        match = _this$props.match; // console.log(history,match)
  };

  _proto.goBack = function goBack() {
    var history = this.props.history;
    history.goBack();
  };

  _proto.goAdd = function goAdd() {
    this.goRoutes("add");
  };

  _proto.goEdit = function goEdit(route) {
    this.goRoutes(route + "/edit");
  };

  _proto.goList = function goList(route) {
    this.goRoutes("" + route);
  };

  _proto.goDetail = function goDetail(route) {
    this.goRoutes("" + route);
  };

  _proto.goRoutes = function goRoutes(route) {
    var _this$props2 = this.props,
        history = _this$props2.history,
        match = _this$props2.match; // console.log(route,match.url)

    history.push(match.url + "/" + route);
  };

  _proto.render = function render() {
    return undefined;
  };

  return Page;
}(Component);

/**
 * 列表页的父类组件
 * @type {component}
 */

var ListPage =
/*#__PURE__*/
function (_Page) {
  _inheritsLoose(ListPage, _Page);

  function ListPage(props) {
    var _this;

    _this = _Page.call(this, props) || this;
    _this.state = {
      selectedRows: [],
      selectedRowKeys: []
    };
    return _this;
  } //缺失深度合并，只做一级合并


  var _proto = ListPage.prototype;

  _proto.mergeTableConfig = function mergeTableConfig(config) {
    return Object.assign({
      size: 'middle',
      pagination: {
        showQuickJumper: true,
        showSizeChanger: true,
        pageSizeOptions: ['10', '20', '50', '100'],
        size: "middle" // showTotal:this.showTotal(this),

      },
      style: {
        width: '100%'
      }
    }, config, config.rowSelection === null ? {} : {
      rowSelection: _extends({
        onChange: this.onSelectChange.bind(this),
        selectedRowKeys: this.state.selectedRowKeys
      }, config.rowSelection)
    });
  };
  /**
   * 组件开始请求获取数据
   * @return {[type]} [description]
   */


  _proto.componentWillMount = function componentWillMount() {
    var actions = this.props.actions; //  actions.listAction();
  };
  /**
   * [onSelectChange ]
   * @param  {[type]} selectedRowKeys [description]
   * @param  {[type]} selectedRows    [description]
   * @return {[type]}                 [description]
   */


  _proto.onSelectChange = function onSelectChange(selectedRowKeys, selectedRows) {
    this.setState({
      selectedRowKeys: selectedRowKeys,
      selectedRows: selectedRows
    });
  };
  /*
  selectRowShow(reactNode){
    const {selectedRowKeys}=this.state
    return selectedRowKeys.length>0 ? (&lt;div className="ant-table-title-toolbar" style={{textAlign:'left'}}>&lt;span>已选&lt;span className="countNum">{selectedRowKeys.length}&lt;/span>条数据&lt;/span>{reactNode}&lt;/div>) :null
  }
  */

  /**
   * [isMultipleSelect 判断当前是否多选]
   * @return {[boolean]} [返回是否多选状态]
   */


  _proto.isSelectMultiple = function isSelectMultiple() {
    return this.getSelectLength() >= 1;
  };
  /**
   * [isSelectSingle 判断当前是否单选]
   * @return {[boolean]} [返回是否多选状态]
   */


  _proto.isSelectSingle = function isSelectSingle() {
    return this.getSelectLength() == 1;
  };
  /**
   * [selectMultiple 判断当前是否多选]
   * 方法反实现过时处理
   * 建议使用isSelectMultiple
   * @return {[boolean]} [返回是否多选状态]
   */


  _proto.selectMultiple = function selectMultiple() {
    return this.getSelectLength() &lt;= 0;
  };
  /**
   * [selectSingle 判断当前是否单选]
   * 方法反实现过时处理
   * 建议使用isSelectSingle
   * @return {[type]} [返回当前是否单选状态]
   */


  _proto.selectSingle = function selectSingle() {
    return this.getSelectLength() != 1;
  };
  /**
   * [getSelectLength 获取当前列表选中记录数量]
   * @return {[number]} [返回选中记录数量]
   */


  _proto.getSelectLength = function getSelectLength() {
    return this.getSelectKeys().length;
  };
  /**
   * [getSelectKeys 获取选中列表的RowKeys]
   * @return {[array[string]]} [返回数组 keys]
   */


  _proto.getSelectKeys = function getSelectKeys() {
    return this.state.selectedRowKeys;
  };
  /**
   * [getSelectRows 获取选中列表行数据]
   * @return {[array[object]]} [返回选中记录数据]
   */


  _proto.getSelectRows = function getSelectRows() {
    return this.state.selectedRows;
  };
  /**
   * [getSearchParams 获取路径参数对象]
   * @return {[URLSearchParams]} [URLSearchParams]
   */


  _proto.getSearchParams = function getSearchParams() {
    var search = this.props.location.search;
    return new URLSearchParams(search.substring(1));
  };
  /**
   * [clearSelectRows 清空已选列清数据记录]
   * @return null
   **/


  _proto.clearSelectRows = function clearSelectRows() {
    this.setState({
      selectedRowKeys: [],
      selectedRows: []
    });
  };
  /**
   * 新增路由监听
   * @return {无}
   */


  _proto.handleAddRoute = function handleAddRoute() {
    this.goAdd();
  };
  /**
   * 编辑路由监听
   * @param  {key} id [description]
   * @return {[type]}    [description]
   */


  _proto.handleEditRoute = function handleEditRoute(id) {
    var key = id || this.getSelectKeys();
    this.goEdit(key);
  };
  /**
   * 编辑路由监听
   * @param  {key} id [description]
   * @return {[type]}    [description]
   */


  _proto.handleDetailRoute = function handleDetailRoute(id) {
    var key = id || this.getSelectKeys();
    this.goDetail(key);
  };
  /**
   * 取消或回退路由监听
   * @return {[null]}
   */


  _proto.handleBackRoute = function handleBackRoute() {
    this.goBack();
  };
  /**
   * [handleDeleteRoute 删除路由监听]
   * @param  {[rowskey]} id [description]
   * @return {[null]}    [description]
   */


  _proto.handleDeleteRoute = function handleDeleteRoute(id) {
    var actions = this.props.actions;
    var key = id || this.getSelectKeys();
    actions.deleteRoute(key);
  };
  /**
   * [handleFilter 监听过滤方法，即搜索提交]
   * @param  {[object]} value [过滤数据条件对象]
   * @return {[type]}       [无]
   */


  _proto.handleFilter = function handleFilter(value) {
    var actions = this.props.actions;
    this.clearSelectRows();
    actions.fetchPage(value);
  };
  /**
   * [onChange 表格分页排序发生变化]
   * @param  {[type]} pagination [description]
   * @param  {[type]} filters    [description]
   * @param  {[type]} sorter     [description]
   * @return {[type]}            [description]
   */


  _proto.onChange = function onChange(pagination, filters, sorter) {
    var reducer = this.props.reducer; // this.querys()

    var object = Object.assign({}, this.searchParams(), pagination, sorter);
    this.handleFilter(object);
  };
  /**
    *  获取查询条件参数
    *
    */


  _proto.searchParams = function searchParams() {
    var querys = this.props.querys; // console.info("override searchPrams method!")

    return {};
  };
  /**
   * 渲染搜索组件
   * @return {null} [description]
   */


  _proto.renderSearchBar = function renderSearchBar() {
    return null;
  };

  _proto.render = function render() {
    return null;
  };

  return ListPage;
}(Page);
ListPage.propTypes = {
  items: PropTypes.array.isRequired,
  actions: PropTypes.object,
  types: PropTypes.object,
  spins: PropTypes.func,
  querys: PropTypes.func
};

var FormPage =
/*#__PURE__*/
function (_Page) {
  _inheritsLoose(FormPage, _Page);

  function FormPage(props) {
    return _Page.call(this, props) || this;
  }

  var _proto = FormPage.prototype;

  _proto.saveFormRef = function saveFormRef(form) {
    this.form = form;
  };

  _proto.onSubmit = function onSubmit(actionType) {
    var _this = this;

    if (actionType === 'handleSubmit') {
      this.form.validateFieldsAndScroll({
        force: true
      }, function (err, values) {
        if (err) {
          return;
        }

        _this.handleSubmit(values);
      });
    } else {
      this[actionType].apply(this, [this.form.getFieldsValue()]);
    }
  };

  _proto.render = function render() {
    // Normally, just render children
    return this.props.children;
  };

  return FormPage;
}(Page);

export default ListPage;
export { ListPage, FormPage, Page as ViewPage };
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.2</a> on Thu May 30 2019 15:45:35 GMT+0800 (China Standard Time) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
